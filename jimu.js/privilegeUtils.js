// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
define("dojo/Deferred esri/arcgis/OAuthInfo esri/IdentityManager esri/request jimu/tokenUtils jimu/portalUrlUtils".split(" "),function(m,n,k,p,q,g){return{checkEssentialAppsLicense:function(h,d,l){var e=g.getStandardPortalUrl(d.portalUrl),a=g.getSharingUrl(e);e=new n({appId:"arcgisWebApps",portalUrl:e});k.registerOAuthInfos([e]);var b=new m;(l?k.checkAppAccess(a,"arcgisWebApps"):d.getItemById(h).then(function(c){return"public"===c.access?{isPublicApp:!0}:k.checkAppAccess(a,"arcgisWebApps")})).then(function(c){d.getSigninSettingsOfSelfInfo().then(function(f){f&&
f.blockedApps&&f.blockedApps.indexOf&&-1<f.blockedApps.indexOf("webappbuilder")?b.reject({message:"wab is blocked by org admin",isBlockedByOrg:!0}):b.resolve(c)},function(f){b.reject({message:f&&f.message,isBlockedByOrg:!1})})},function(c){b.reject({message:c&&c.message,isBlockedByOrg:!1})});return b},checkIsSelfOrigin:function(h,d,l){var e=!0,a=g.getPortalUrlFromLocation();a=g.getStandardPortalUrl(a);h=g.getItemUrl(a,h);var b=window.location.host;a=q.userHaveSignInPortal(a);b=0<=["www.arcgis.com",
"devext.arcgis.com","qaext.arcgis.com"].indexOf(b);if(d.isPortal||l||b||a)d=new m,d.resolve(e);else return p({url:h,handleAs:"json",content:{f:"json"},callbackParamName:"callback"}).then(function(c){c.contentOrigin&&"self"!==c.contentOrigin&&(e=!1);return e});return d}}});